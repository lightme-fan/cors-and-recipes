{"version":3,"sources":["scripts.js"],"names":["baseEndpoint","proxy","form","document","querySelector","recipeEl","checkboxEl","querySelectorAll","fetchRecipes","query","ingredients","ingrString","join","response","fetch","console","log","data","json","handleSubmit","e","preventDefault","el","currentTarget","searchInput","fetchAndDisplay","value","submit","desabled","forEach","checkbox","checked","push","name","recipes","displayRecipes","results","html","map","recipe","title","thumbnail","href","innerHTML","addEventListener"],"mappings":"AAAA,MAAMA,YAAY,GAAG,gCAArB;AACA,MAAMC,KAAK,GAAG,sCAAd;AACA,MAAMC,IAAI,GAAGC,QAAQ,CAACC,aAAT,CAAuB,aAAvB,CAAb;AACA,MAAMC,QAAQ,GAAGF,QAAQ,CAACC,aAAT,CAAuB,UAAvB,CAAjB;AACA,MAAME,UAAU,GAAGH,QAAQ,CAACI,gBAAT,CAA0B,mBAA1B,CAAnB;;AAEA,eAAeC,YAAf,CAA4BC,KAA5B,EAAmCC,WAAnC,EAAgD;AAC5C,QAAMC,UAAU,GAAGD,WAAW,CAACE,IAAZ,CAAiB,GAAjB,CAAnB;AACA,QAAMC,QAAQ,GAAG,MAAMC,KAAK,CAAE,GAAEb,KAAM,GAAED,YAAa,MAAKS,KAAM,MAAKE,UAAW,EAApD,CAA5B;AACAI,EAAAA,OAAO,CAACC,GAAR,CAAa,GAAEf,KAAM,GAAED,YAAa,MAAKS,KAAM,MAAKE,UAAW,EAA/D;AACA,QAAMM,IAAI,GAAG,MAAMJ,QAAQ,CAACK,IAAT,EAAnB;AACAH,EAAAA,OAAO,CAACC,GAAR,CAAYC,IAAZ;AACA,SAAOA,IAAP;AACH;;AAED,MAAME,YAAY,GAAG,MAAOC,CAAP,IAAa;AAC9BA,EAAAA,CAAC,CAACC,cAAF;AACA,QAAMC,EAAE,GAAGF,CAAC,CAACG,aAAb;AACA,QAAMC,WAAW,GAAGF,EAAE,CAACb,KAAvB,CAH8B,CAI9B;;AACAgB,EAAAA,eAAe,CAACD,WAAW,CAACE,KAAb,CAAf;AACH,CAND;;AAQA,eAAeD,eAAf,CAA+BhB,KAA/B,EAAsC;AAClC;AACAP,EAAAA,IAAI,CAACyB,MAAL,CAAYC,QAAZ,GAAuB,IAAvB;AAEA,MAAIlB,WAAW,GAAG,EAAlB;AACAJ,EAAAA,UAAU,CAACuB,OAAX,CAAmBC,QAAQ,IAAI;AAC3B,QAAIA,QAAQ,CAACC,OAAb,EAAsB;AAClBrB,MAAAA,WAAW,CAACsB,IAAZ,CAAiBF,QAAQ,CAACG,IAA1B;AACH;AACJ,GAJD,EALkC,CAWlC;;AACA,QAAMC,OAAO,GAAG,MAAM1B,YAAY,CAACC,KAAD,EAAQC,WAAR,CAAlC,CAZkC,CAalC;;AACAR,EAAAA,IAAI,CAACyB,MAAL,CAAYC,QAAZ,GAAuB,KAAvB;AACAO,EAAAA,cAAc,CAACD,OAAO,CAACE,OAAT,CAAd;AACH;;AAED,SAASD,cAAT,CAAwBD,OAAxB,EAAiC;AAC7BnB,EAAAA,OAAO,CAACC,GAAR,CAAYkB,OAAZ;AACA,QAAMG,IAAI,GAAGH,OAAO,CAACI,GAAR,CAAYC,MAAM,IAAI;AAC/B,WAAQ;;kBAEEA,MAAM,CAACC,KAAM;iBACdD,MAAM,CAAC7B,WAAY;cACtB6B,MAAM,CAACE,SAAP,IAAqB,aAAYF,MAAM,CAACE,SAAU,UAASF,MAAM,CAACC,KAAM,IAAI;uBACnED,MAAM,CAACG,IAAK;;SAL3B;AAQH,GATY,CAAb;AAUArC,EAAAA,QAAQ,CAACsC,SAAT,GAAqBN,IAAI,CAACzB,IAAL,CAAU,EAAV,CAArB;AACH;;AAEDV,IAAI,CAAC0C,gBAAL,CAAsB,QAAtB,EAAgCzB,YAAhC;AACAM,eAAe,CAAC,OAAD,CAAf","file":"scripts.b71a6038.js","sourceRoot":"..","sourcesContent":["const baseEndpoint = 'http://www.recipepuppy.com/api';\r\nconst proxy = 'https://cors-anywhere.herokuapp.com/'; \r\nconst form = document.querySelector('form.search');\r\nconst recipeEl = document.querySelector('.recipes');\r\nconst checkboxEl = document.querySelectorAll('[type=\"checkbox\"]');\r\n\r\nasync function fetchRecipes(query, ingredients) {\r\n    const ingrString = ingredients.join(',')\r\n    const response = await fetch(`${proxy}${baseEndpoint}?q=${query}&i=${ingrString}`);\r\n    console.log(`${proxy}${baseEndpoint}?q=${query}&i=${ingrString}`)\r\n    const data = await response.json();\r\n    console.log(data)\r\n    return data;\r\n}\r\n\r\nconst handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    const el = e.currentTarget;\r\n    const searchInput = el.query;\r\n    // const ingredientInput = el.ingredient;\r\n    fetchAndDisplay(searchInput.value)\r\n}\r\n\r\nasync function fetchAndDisplay(query) {\r\n    // Turn the form off\r\n    form.submit.desabled = true;\r\n\r\n    let ingredients = [];\r\n    checkboxEl.forEach(checkbox => {\r\n        if (checkbox.checked) {\r\n            ingredients.push(checkbox.name)\r\n        }\r\n    })\r\n\r\n    // Submit the search\r\n    const recipes = await fetchRecipes(query, ingredients);\r\n    // Turn the form on\r\n    form.submit.desabled = false;\r\n    displayRecipes(recipes.results);    \r\n}\r\n\r\nfunction displayRecipes(recipes) {\r\n    console.log(recipes);\r\n    const html = recipes.map(recipe => {\r\n        return `\r\n        <div class=\"recipe\">\r\n            <h2>${recipe.title}</h2>\r\n            <p>${recipe.ingredients}</p>\r\n            ${recipe.thumbnail && `<img src=\"${recipe.thumbnail}\" alt=\"${recipe.title}\">`}\r\n            <a href=\"${recipe.href}\">View recipe -></a>\r\n        </div>\r\n        `;\r\n    }) \r\n    recipeEl.innerHTML = html.join('');\r\n}\r\n\r\nform.addEventListener('submit', handleSubmit);\r\nfetchAndDisplay('pizza');"]}